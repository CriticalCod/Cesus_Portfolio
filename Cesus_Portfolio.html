<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome</title>
  <link rel="icon" href="portfolio.png" />
  <style>
    /* Reset & Base */
    * { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior: smooth; height:100%; }
    body { font-family:'Segoe UI',sans-serif; height:100%; overflow:hidden; cursor:none; transition:background 1s, color 1s; }

    /* Background GIFs */
    .bg-img { position:fixed; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:-3; opacity:0; transition:opacity 1s ease-in-out; }

    /* Particle Canvas */
    #weatherCanvas { position:fixed; top:0; left:0; width:100%; height:100%; z-index:-2; pointer-events:none; }

    /* Theme Colors & Buttons */
    :root {
      --accent: #00adee;
      --rain-bg: #2b2b35;
      --snow-bg: linear-gradient(135deg, #1a1a2e, #16213e);
      --text: #e0e0e0;
    }
    body.rain { background: var(--rain-bg); color: var(--text); }
    body.snow { background: var(--snow-bg); color: var(--text); }
    #toggleBtn { position:fixed; top:1rem; right:1rem; background:var(--accent); color:#fff; border:none; padding:.5rem 1rem; border-radius:1rem; cursor:pointer; z-index:500; transition:transform .2s; }
    #toggleBtn:hover { transform:scale(1.05); }

    /* Navigation */
    nav { position:fixed; top:1rem; left:50%; transform:translateX(-50%); display:flex; gap:2rem; font-weight:600; z-index:500; }
    nav a { position:relative; padding:.5rem; text-decoration:none; color:inherit; }
    nav a::after { content:''; position:absolute; bottom:-4px; left:50%; width:0; height:2px; background:var(--accent); transition:width .3s,left .3s; }
    nav a:hover::after { width:100%; left:0; }

    /* Custom Cursor */
    #cursor { position:fixed; top:0; left:0; width:18px; height:18px; border:2px solid var(--accent); border-radius:50%; pointer-events:none; transform:translate(-50%,-50%); transition:width .2s,height .2s; z-index:500; }

    /* Section Reveal */
    section { padding:6rem 2rem; max-width:900px; margin:auto; opacity:0; transform:translateY(40px); transition:opacity .8s ease, transform .8s ease; }
    section.visible { opacity:1; transform:translateY(0); }
    h1, h2 { text-align:center; margin-bottom:1rem; opacity:0; transform:scale(0.8); animation:popIn .6s forwards; }
    h1 { animation-delay:.3s; font-size:3rem; }
    h2 { animation-delay:.5s; font-size:2.2rem; }
    @keyframes popIn { to { opacity:1; transform:scale(1); } }
    p { margin:1rem 0; line-height:1.6; font-size:1.1rem; }

    /* Cards */
    .cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1.5rem; margin-top:2rem; }
    .card { background:rgba(255,255,255,.1); border-radius:1rem; overflow:hidden; cursor:pointer; box-shadow:0 4px 20px rgba(0,0,0,.1); transition:transform .3s,box-shadow .3s; }
    .card:hover { transform:translateY(-8px); box-shadow:0 12px 25px rgba(0,0,0,.2); }
    .card img { width:100%; display:block; }
    .card-title { padding:.8rem; text-align:center; font-weight:600; }

    @media(max-width:600px){ nav{flex-direction:column;} }
  </style>
</head>
<body class="rain">
  <img src="light-mode.gif" class="bg-img" id="lightBg" />
  <img src="dark-mode.gif" class="bg-img" id="darkBg" />
  <canvas id="weatherCanvas"></canvas>

  <div id="cursor"></div>
  <nav><a href="#profile">Profile</a><a href="#about">About</a><a href="#games">Games</a><a href="#connect">Connect</a></nav>
  <button id="toggleBtn">Snow Mode</button>

  <audio id="welcomeAudio" src="WELCOME.mp3"></audio>
  <audio id="goodbyeAudio" src="GOODBYE.mp3"></audio>

  <section id="profile">
    <h1 id="typed-name"></h1>
    <div style="text-align:center;">
      <a href="https://www.roblox.com/users/5285137754/profile" target="_blank">
        <img src="PFP2.png" alt="Profile" style="border-radius:50%;border:4px solid var(--accent);width:180px;height:180px;object-fit:cover;" />
      </a>
    </div>
  </section>

  <section id="about"><h2>About Me</h2><p id="description"></p></section>

  <section id="games"><h2>My Games</h2><div class="cards">
    <div class="card" onclick="window.open('https://www.roblox.com/games/119772804153332/The-Piano')">
      <img src="https://assetgame.roblox.com/Game/Thumbnail/?id=119772804153332&width=420&height=420" alt="The Piano" />
      <div class="card-title">The Piano</div>
    </div>
    <div class="card" onclick="window.open('https://www.roblox.com/games/16910864408/Parkour-remix-Beta')">
      <img src="https://assetgame.roblox.com/Game/Thumbnail/?id=16910864408&width=420&height=420" alt="Parkour Remix Beta" />
      <div class="card-title">Parkour Remix Beta</div>
    </div>
    <div class="card" onclick="window.open('https://www.roblox.com/games/18583305383/Robloc-Home-Revamped-Beta-Realism')">
      <img src="https://assetgame.roblox.com/Game/Thumbnail/?id=18583305383&width=420&height=420" alt="Robloc Home Revamped" />
      <div class="card-title">Robloc Home Revamped</div>
    </div>
  </div></section>

  <section id="connect"><h2>Connect with Me</h2><div style="display:flex;justify-content:center;gap:2rem;">
    <a href="https://discord.gg/K8QUnEDhVJ" target="_blank"><img src="discord.png" alt="Discord" width="48" /></a>
    <a href="https://www.youtube.com/@casussa" target="_blank"><img src="youtube.png" alt="YouTube" width="48" /></a>
    <a href="https://www.roblox.com/users/5285137754/profile" target="_blank"><img src="roblox.png" alt="Roblox" width="48" /></a>
  </div></section>

  <script>
    // Variables
    const body = document.body;
    const lightBg = document.getElementById('lightBg');
    const darkBg = document.getElementById('darkBg');
    const toggle = document.getElementById('toggleBtn');
    const cursor = document.getElementById('cursor');
    const canvas = document.getElementById('weatherCanvas'), ctx = canvas.getContext('2d');
    let particles = [];
    let cursorPos = { x: -100, y: -100 };

    // Initial states
    lightBg.style.opacity = '1';
    darkBg.style.opacity = '0';

    // Audio
    window.addEventListener('DOMContentLoaded', () => { document.getElementById('welcomeAudio').play().catch(() => {}); });
    window.addEventListener('beforeunload', () => { document.getElementById('goodbyeAudio').play(); });

    // Section reveal
    document.querySelectorAll('section').forEach(sec => {
      new IntersectionObserver(([e]) => { if (e.isIntersecting) sec.classList.add('visible'); }, { threshold: 0.3 }).observe(sec);
    });

    // Tab title effect
    (function loopTitle() {
      const titles = ['Welcome', 'Casus'];
      let idx = 0, sub = 0, forward = true;
      setInterval(() => {
        document.title = titles[idx].slice(0, sub);
        forward ? sub++ : sub--;
        if (sub > titles[idx].length) { forward = false; sub = titles[idx].length; }
        else if (sub < 0) { forward = true; idx = (idx + 1) % titles.length; sub = 1; }
      }, 300);
    })();

    // Typing effect
    function typeEffect(text, el, delay) { let i = 0; (function t() { if (i < text.length) { el.textContent += text[i++]; setTimeout(t, delay); }} )(); }
    window.onload = () => {
      typeEffect('Casus', document.getElementById('typed-name'), 150);
      typeEffect('With 3 years mastering code, 2 months crafting GFX, 1 year animating & extensive graphic design, I create engaging digital experiences.', document.getElementById('description'), 25);
      initCanvas(); animate();
    };

    // Cursor follow
    document.addEventListener('mousemove', e => { cursor.style.top = e.clientY + 'px'; cursor.style.left = e.clientX + 'px'; cursorPos = { x: e.clientX, y: e.clientY }; });
    document.querySelectorAll('a, .card, button').forEach(el => {
      el.addEventListener('mouseenter', () => { cursor.style.width = '35px'; cursor.style.height = '35px'; });
      el.addEventListener('mouseleave', () => { cursor.style.width = '18px'; cursor.style.height = '18px'; });
    });

    // Particle init
    function initCanvas() {
      canvas.width = innerWidth;
      canvas.height = innerHeight;
      particles = [];
      const count = body.classList.contains('snow') ? 350 : 250;
      for (let i = 0; i < count; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          vy: body.classList.contains('snow') ? Math.random() * 0.5 + 0.1 : Math.random() * 8 + 6,
          length: body.classList.contains('snow') ? Math.random() * 4 + 2 : Math.random() * 15 + 10,
          opacity: Math.random() * 0.5 + (body.classList.contains('snow') ? 0.3 : 0.5),
          width: body.classList.contains('snow') ? 0 : Math.random() * 1 + 1,
          angle: Math.random() * Math.PI / 6 - Math.PI / 12
        });
      }
    }

    // Animate
    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => {
        const dx = p.x - cursorPos.x, dy = p.y - cursorPos.y;
        const dist = Math.hypot(dx, dy);
        if (dist < 60) {
          const angle = Math.atan2(dy, dx);
          const strength = (60 - dist) / 60;
          p.x += Math.cos(angle) * strength * 8;
          p.y += Math.sin(angle) * strength * 8;
        }
        if (body.classList.contains('snow')) {
          ctx.fillStyle = `rgba(255,255,255,${p.opacity})`;
          ctx.beginPath(); ctx.arc(p.x, p.y, p.length / 2, 0, Math.PI * 2); ctx.fill();
        } else {
          const x2 = p.x + Math.sin(p.angle) * p.length;
          const y2 = p.y + Math.cos(p.angle) * p.length;
          const g = ctx.createLinearGradient(p.x, p.y, x2, y2);
          g.addColorStop(0, `rgba(0,170,238,${p.opacity})`);
          g.addColorStop(1, 'rgba(0,170,238,0)');
          ctx.strokeStyle = g;
          ctx.lineWidth = p.width;
          ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(x2, y2); ctx.stroke();
        }
        p.y += p.vy; p.x += Math.sin(p.angle) * 2;
        if (p.y > canvas.height || p.x > canvas.width || p.x < 0) { p.y = -p.length; p.x = Math.random() * canvas.width; }
      });
      requestAnimationFrame(animate);
    }

    // Toggle
    toggle.addEventListener('click', () => {
      if (body.classList.contains('rain')) {
        body.classList.replace('rain', 'snow');
        toggle.textContent = 'Rain Mode';
        darkBg.style.opacity = '1'; lightBg.style.opacity = '0';
      } else {
        body.classList.replace('snow', 'rain');
        toggle.textContent = 'Snow Mode';
        lightBg.style.opacity = '1'; darkBg.style.opacity = '0';
      }
      initCanvas();
    });
    window.addEventListener('resize', initCanvas);
  </script>
</body>
</html>
